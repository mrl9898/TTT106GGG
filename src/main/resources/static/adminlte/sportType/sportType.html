<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>SportType æ¸¬è©¦é </title>
</head>
<body>
    <h1>SportType æ¸¬è©¦é </h1>

    <button id="btn_insertMultiple">æ–°å¢å¤šç­† SportType</button>
    <button id="btn_updateMultiple">æ›´æ–°å¤šç­† SportType</button>
    <br><br>

    <button id="btn_isExistName">æª¢æŸ¥åç¨±æ˜¯å¦å­˜åœ¨</button>
    <br><br>
    
    <button id="btn_getSingle">æŸ¥è©¢å–®ç­†</button>
    <button id="btn_getMultiple">æŸ¥è©¢å¤šç­†</button>
    <br><br>

    <button id="btn_getSingleWithStatuses">æŸ¥å–®ç­†(å«ç‹€æ…‹ç¯©é¸)</button>
    <button id="btn_getMultipleWithStatuses">æŸ¥å¤šç­†(å«ç‹€æ…‹ç¯©é¸)</button>
    <button id="btn_getAllByStatuses">æŸ¥å…¨éƒ¨(ä¾ç‹€æ…‹)</button>
    <br><br>

    <button id="btn_updateStatus">æ›´æ–°ç‹€æ…‹</button>

    <!-- ğŸ”½ æ–°å¢ï¼šè¤‡åˆæŸ¥è©¢è¡¨å–® -->
    <h3>è¤‡åˆæŸ¥è©¢ (getByComplexCondition)</h3>
    <form id="complexForm">
        <div>
            <label>é‹å‹•åˆ†é¡åç¨±(æ¨¡ç³Š)ï¼š</label>
            <input type="text" name="sportTypeNameFuzzy" value="åˆ†é¡">
        </div>
        <div>
            <label>å»ºç«‹èµ·å§‹æ—¥æœŸï¼š</label>
            <input type="date" name="createStartDate">
        </div>
        <div>
            <label>å»ºç«‹çµæŸæ—¥æœŸï¼š</label>
            <input type="date" name="createEndDate">
        </div>
        <div>
            <label>æ›´æ–°èµ·å§‹æ—¥æœŸï¼š</label>
            <input type="date" name="updateStartDate">
        </div>
        <div>
            <label>æ›´æ–°çµæŸæ—¥æœŸï¼š</label>
            <input type="date" name="updateEndDate">
        </div>
        <div>
            <label>ç‹€æ…‹ (å¯å¤šé¸)ï¼š</label><br>
            <select name="statuses" multiple size="3">
                <option value="0">ä¸‹æ¶ (0)</option>
                <option value="1" selected>ä¸Šæ¶ (1)</option>
                <option value="2">åˆªé™¤ (2)</option>
            </select>
        </div>
        <br>
        <button type="submit">é€å‡ºæŸ¥è©¢</button>
    </form>

    <h3>æŸ¥è©¢çµæœ</h3>
    <pre id="result"></pre>

    <script>
        const baseUrl = window.location.origin + "/sportType/api";

        async function insertMultiple() {
            let res = await fetch(baseUrl + "/insertMultiple", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify([
                    { sportTypeId: null, sportTypeName: "åŠ åˆ†é¡01", sportTypePic: "aerobic.png", sportTypeDataStatus: 1 },
                    { sportTypeId: null, sportTypeName: "åŠ åˆ†é¡02", sportTypePic: "weights.png", sportTypeDataStatus: 1 }
                ])
            });
            console.log(await res.json().catch(()=>res.text()));
        }

        async function updateMultiple() {
            let res = await fetch(baseUrl + "/updateMultiple", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify([
                    { sportTypeId: 3, sportTypeName: "æ›´æ–°-åŠ åˆ†é¡01", sportTypePic: "aerobic2.png" }
                ])
            });
            console.log(await res.json().catch(()=>res.text()));
        }

        async function isExistName() {
            let res = await fetch(baseUrl + "/isExistSportTypeName", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: "æœ‰æ°§"
            });
            console.log(await res.json().catch(()=>res.text()));
        }

        async function getSingle() {
            let res = await fetch(baseUrl + "/getSingleBySportTypeId", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(1)
            });
            console.log(await res.json().catch(()=>res.text()));
        }

        async function getMultiple() {
            let res = await fetch(baseUrl + "/getMultipleBySportTypeIds", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify([1, 2])
            });
            console.log(await res.json().catch(()=>res.text()));
        }

        async function getSingleWithStatuses() {
            let res = await fetch(baseUrl + "/getSingleSportTypeIdAndDataStatuses", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    sportTypeId: 2,
                    statuses: [0, 1]
                })
            });
            console.log(await res.json().catch(()=>res.text()));
        }

        async function getMultipleWithStatuses() {
            let res = await fetch(baseUrl + "/getMultipleBySportTypeIdsAndDataStatuses", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    sportTypeIds: [1, 2],
                    statuses: [1]
                })
            });
            console.log(await res.json().catch(()=>res.text()));
        }

        async function getAllByStatuses() {
            let res = await fetch(baseUrl + "/getMultipleBySportTypeDataStatuses", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify([1])
            });
            console.log(await res.json().catch(()=>res.text()));
        }

        async function updateStatus() {
            let res = await fetch(baseUrl + "/updateSportTypeDataStatusBySportTypeIds", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    dataStatus: 0,
                    sportTypeIds: [3]
                })
            });
            console.log(await res.json().catch(()=>res.text()));
        }

        document.getElementById("btn_insertMultiple").addEventListener("click", insertMultiple);
        document.getElementById("btn_updateMultiple").addEventListener("click", updateMultiple);
        document.getElementById("btn_isExistName").addEventListener("click", isExistName);
        document.getElementById("btn_getSingle").addEventListener("click", getSingle);
        document.getElementById("btn_getMultiple").addEventListener("click", getMultiple);
        document.getElementById("btn_getSingleWithStatuses").addEventListener("click", getSingleWithStatuses);
        document.getElementById("btn_getMultipleWithStatuses").addEventListener("click", getMultipleWithStatuses);
        document.getElementById("btn_getAllByStatuses").addEventListener("click", getAllByStatuses);
        document.getElementById("btn_updateStatus").addEventListener("click", updateStatus);

        // ğŸ”½ æ–°å¢ï¼šè¤‡åˆæŸ¥è©¢è¡¨å–®è™•ç†
        const form = document.getElementById("complexForm");
        const resultEl = document.getElementById("result");

        form.addEventListener("submit", async function (e) {
            e.preventDefault();
            const formData = new FormData(form);
            const statuses = formData.getAll("statuses").map(s => parseInt(s));

            const payload = {
                sportTypeNameFuzzy: formData.get("sportTypeNameFuzzy") || null,
                createStartDate: formData.get("createStartDate") || null,
                createEndDate: formData.get("createEndDate") || null,
                updateStartDate: formData.get("updateStartDate") || null,
                updateEndDate: formData.get("updateEndDate") || null,
                statuses: statuses
            };

            console.log("é€å‡ºæŸ¥è©¢åƒæ•¸:", payload);

            try {
                let res = await fetch(baseUrl + "/getByComplexCondition", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(payload)
                });

                let data = await res.json();
                console.log("è¤‡åˆæŸ¥è©¢çµæœ:", data);
                resultEl.textContent = JSON.stringify(data, null, 2);
            } catch (err) {
                console.error("æŸ¥è©¢å¤±æ•—", err);
                resultEl.textContent = "æŸ¥è©¢å¤±æ•—: " + err;
            }
        });
    </script>
</body>
</html>
